{% extends "base.html" %}

{% block content %}
<div class="manage-users-container">
    <h1>Manage Users</h1>

    <div class="users-container">
        {% for user in users %}
        <style> :root {
  --panel: #c9cece; /* White background for user card */
  --muted: #e8ebed; /* Muted text */
  --text: #222121; /* Dark text color */
  --bd: rgba(224, 228, 234, 0.18); /* Light border */
}

.manage-users-container {
    max-width: 1100px;
    margin: 0 auto;
    padding: 24px;
}

h1 {
    margin: 0 0 12px;
    color: var(white); /* Manage Users title color */
}

.users-container {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 20px;
    padding: 20px;
}

.user-card {
    background-color: #9fb7ce;
    padding: 20px;
    border-radius: 8px;
    box-shadow: 0 2px 10px rgba(178, 187, 191, 0.1);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    height: auto; /* Dynamic height based on content */
}

.user-card:hover {
    transform: translateY(-10px);
    box-shadow: 0 4px 20px rgba(216, 212, 212, 0.2);
}

.user-card h3 {
    font-size: 1.5rem;
    margin-bottom: 10px;
}

.user-card p {
    font-size: 1rem;
    margin-bottom: 15px;
}

.user-actions {
    display: flex;
    flex-direction: column; /* Stack buttons vertically */
    gap: 10px;
    margin-top: 15px;
}

.role-change {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: 10px;
}

.role-change-form {
    display: flex;
    gap: 10px;
    width: 100%;
    align-items: center;
}

.role-selector {
    padding: 5px;
    border-radius: 5px;
    font-size: 1rem;
    width: 50%; /* Adjust the width of the dropdown */
}

.btn {
    padding: 8px 12px; /* Reduced padding for smaller button size */
    border: none;
    border-radius: 5px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    width: 100%; /* Full width to align the buttons */
}

.btn:hover {
    background-color: #983535;
}

.block-btn {
    background-color: hsl(0, 51%, 57%); /* Teal background for block button */
}

.block-btn:hover {
    background-color: #0097a7;
}

.change-role-btn {
    background-color: #41a4de; /* Blue background for Change Role button */
}

.change-role-btn:hover {
    background-color: #0056b3;
}
</style>
            <div class="user-card">
                <h3>{{ user.name }}</h3>
                <p>Email: {{ user.email }}</p>
                <p>Role: {{ user.role }}</p>

                <div class="user-actions">
                    <div class="role-change">
                        <form action="{{ url_for('admin.change_user_role', user_id=user.user_id) }}" method="post" class="role-change-form">
                            <select name="role" class="role-selector">
                                <option value="customer" {% if user.role == 'customer' %} selected {% endif %}>Customer</option>
                                <option value="pharmacist" {% if user.role == 'pharmacist' %} selected {% endif %}>Pharmacist</option>
                                <option value="company" {% if user.role == 'company' %} selected {% endif %}>Company</option>
                                <option value="doctor" {% if user.role == 'doctor' %} selected {% endif %}>Doctor</option>
                                <option value="admin" {% if user.role == 'admin' %} selected {% endif %}>Admin</option>
                            </select>
                            <button type="submit" class="btn change-role-btn">Change Role</button>
                        </form>
                    </div>

                    <form action="{{ url_for('admin.block_user', user_id=user.user_id) }}" method="post">
                        <button type="submit" class="btn block-btn">Block</button>
                    </form>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
